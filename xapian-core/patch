Index: tests/api_backend.cc
===================================================================
--- tests/api_backend.cc	(revision 12559)
+++ tests/api_backend.cc	(working copy)
@@ -31,6 +31,8 @@
 
 #include "apitest.h"
 
+#include <cstring> // For strcmp().
+
 using namespace std;
 
 /// Regression test - lockfile should honour umask, was only user-readable.
@@ -73,7 +75,7 @@
     TEST_EQUAL(db.get_avlength(), 2000000000);
     db.flush();
     TEST_EQUAL(db.get_avlength(), 2000000000);
-    if (get_dbtype() != "inmemory") {
+    if (strcmp(get_dbtype(), "inmemory") != 0) {
 	// InMemory doesn't support get_writable_database_as_database().
 	Xapian::Database dbr = get_writable_database_as_database();
 	TEST_EQUAL(dbr.get_avlength(), 2000000000);
